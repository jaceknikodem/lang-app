#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Type checking
echo "ğŸ“ Type checking..."
npm run lint || {
  echo "âŒ Type checking failed. Please fix TypeScript errors before pushing."
  exit 1
}

# Full build
echo "ğŸ”¨ Full build..."
npm run build || {
  echo "âŒ Build failed. Please fix build errors before pushing."
  exit 1
}

# Skip E2E tests for now since they're flaky in CI environment
# TODO: Fix E2E test stability and re-enable
echo "â­ï¸  Skipping E2E tests (TODO: fix test stability)"
echo "ğŸ’¡ Run 'npm run test:e2e' manually to test functionality"
echo "ğŸ’¡ To run E2E tests in pre-push: remove this skip in .husky/pre-push"

echo "âœ… Pre-push checks completed!"